{% extends "layouts/base.html" %}

{% block title %} Training {% endblock %}

{% block stylesheets %}
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.179.0.min.js"></script>

<link href="/static/assets/css/trainingPage.css" rel="stylesheet">

{% endblock stylesheets %}

{% block content %}

<div class="body flex-grow-1 px-3">
  <div class="container-lg">
    <div class="card">
      <div class="card-body">
        <div class="progress" style="height: 30px;">
          <div class="progress-bar bg-warning" role="progressbar" style="width: 25%;" aria-valuenow="25"
            aria-valuemin="0" aria-valuemax="100">Level 1</div>
        </div>
        <br>
        <h3 style="color: #B31B1B">How would you interact with an anxious patient?</h3>
        <p class="card-text"> Katie is here with an overdose from opioids. You just introduced yourself, and asked their
          full name and preferred pronouns. <br>
          Click "Start" to listen to Katie and start the recording. When she stops talking, click on "Save" and proceed
          to the next page to see your results.</p>
        <div class="start-stop text-center">
          <button class="btn btn-dark" type="button" id="startRecord" onclick="startListener()">Start</button>
          <!-- <button class="btn btn-dark" type="button" id="save" onclick="getfilename()">Save</button> -->
          <button class="btn btn-dark" type="button" id="save" onclick="saveResults()">Save</button>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div id="vidParent" class="card-body text-center">
          <video id="vid" controlslist="”nodownload”" style="width: 100%; height: 32vw; object-fit: cover;">
            <source src="https://medship.s3.amazonaws.com/cs1/1/polite/pt.MOV" type="video/mp4">
          </video>
        </div>
      </div>
      <div class="col">
        <div id="streamParent" class="card-body text-center">
          <canvas id="drawCanvas" class="drawCanvasTraining"></canvas>
          <video id="stream" style="width: 100%; height: 32vw; object-fit: fit;" autoplay="" muted=""></video>
          <canvas id="captureCanvas"></canvas>
          <div class="" style="position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)">
            <h1 id="canvas-text"></h1>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <a class="nav-link" href="cs1-landing.html">
          <button class="btn btn-dark" type="button">Back</button>
        </a>
      </div>
      <div class="col-6 text-end">
        <a id="next" class="nav-link" href="cs1-1-polite-2.html" style="display: none;">
          <button class="btn btn-primary" type="button">Next</button>
        </a>
      </div>
    </div>

  </div>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script type="text/javascript" src="https://download.affectiva.com/js/3.2/affdex.js"></script>

<script>
  //const testType = 'karaoke-welcoming'
  //const dataColumns = ['timestamp', 'smile', 'cheekRaise']
</script>
<script type="text/javascript" src="/static/assets/js/training-global.js"></script>

{% endblock javascripts %}