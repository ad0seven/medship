{% extends "layouts/base.html" %}

{% block title %} Training {% endblock %} 

{% block stylesheets %}
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.179.0.min.js"></script>
<link href="/static/assets/css/trainingPage.css" rel="stylesheet">
{% endblock stylesheets %}

{% block content %}

<div class="body flex-grow-1 px-3">
  <div class="container-lg">
    <div class="card">
      <div class="card-body">
        <div class="progress" style="height: 30px;">
          <div class="progress-bar bg-warning" role="progressbar" style="width: 50%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">Level 2</div>
        </div>
        <br>
        <h3 style="color: #B31B1B">What brought you in?</h3>
          <p class="card-text"> While Katie is still present in the room, you want to know what she was up to before she arrived at the hospital.<br> <br> Click on "Start Camera" below to listen to what the patient tells next, and to start the recording. When the patient stops talking, please click on "Save" and proceed to the next page to see your results.</p>
        <div class="start-stop text-center">
          <button class="btn btn-dark" type="button" id="startRecord" onclick="startListener()">Start</button>
          <!-- <button class="btn btn-dark" type="button" id="save" onclick="getfilename()">Save</button> -->
          <button class="btn btn-dark" type="button" id="save" onclick="saveResults()">Save</button>
        </div>
        <div class="card-body text-center">
          <p id="saving" style="display: none"><span class="spinner-border" role="status"></span>Processing Video...</p>
        </div>
      </div>
    </div>
      <div class="row">
         <div class="col">
          <div id="vidParent" class="card-body text-center">
            <video id="vid" controlslist="”nodownload”" style="width: 100%; height: 32vw; object-fit: cover;">
            <source src="https://medship.s3.amazonaws.com/cs1/2/angerparanoia/pt.MOV" type="video/mp4">
           </video>
          </div>
       </div>
       <div class="col">
        <div id="streamParent" class="card-body text-center">
          <canvas id="drawCanvas" class="drawCanvasTraining"></canvas>
          <video id="stream" style="width: 100%; height: 32vw; object-fit: fit;" autoplay="" muted=""></video>
          <canvas id="captureCanvas"></canvas>
          <div class="" style="position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)">
            <h1 id="canvas-text"></h1>
          </div>
        </div>
      </div>
</div>
<div class="row">
      <div class="col-6">
        <a class="nav-link" href="cs1-1-agitated-2.html">
        <button class="btn btn-dark" type="button">Back</button>
        </a>
      </div>
      <div class="col-6 text-end">
        <a class="nav-link" href="cs1-2-angerparanoia-2.html">
          <button class="btn btn-primary" type="button">Next</button>
        </a>  
      </div>
      </div>
   
    </div>
  </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<script type="text/javascript" src="https://download.affectiva.com/js/3.2/affdex.js"></script>

<script>
  //const testType = 'karaoke-welcoming'
  //const dataColumns = ['timestamp', 'smile', 'cheekRaise']
</script>
<script type="text/javascript" src="/static/assets/js/training-global.js"></script>


{% endblock javascripts %}